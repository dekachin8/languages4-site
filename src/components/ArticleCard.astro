---
// ArticleCard.astro - Reusable card for blog/signature-collections/ancestors
interface Props {
  title: string;
  description: string;
  pubDate: Date;
  heroImage?: string;
  heroImageAlt?: string;
  cardImage?: string;        // NEW
  cardImageAlt?: string;     // NEW
  slug: string;
  collection: 'whatarel4' | 'signature-collections' | 'ancestors';
  tags?: string[];
}

const { title, description, pubDate, heroImage, heroImageAlt, cardImage, cardImageAlt, slug, collection, tags = [] } = Astro.props;

// Format date
const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}).format(pubDate);

// Build URL based on collection
const articleUrl = `/${collection}/${slug}`;

// Use cardImage if available, otherwise fallback to heroImage
const displayImage = cardImage || heroImage;
const displayImageAlt = cardImageAlt || heroImageAlt || title;
---

<article class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-brand border border-neutral-200">
  
  <!-- Hero/Card Image -->
  {displayImage && (
    <a href={articleUrl} class="block">
      <img 
        src={displayImage} 
        alt={displayImageAlt}
        class="w-full h-48 object-cover hover:opacity-90 transition-opacity"
      />
    </a>
  )}
  
  <!-- Card Content -->
  <div class="p-6">
    
    <!-- Date -->
    <time class="text-sm text-neutral-500 block mb-2">
      {formattedDate}
    </time>
    
    <!-- Title -->
    <h3 class="font-display text-xl font-semibold text-primary-900 mb-3 hover:text-accent-600 transition-colors">
      <a href={articleUrl}>
        {title}
      </a>
    </h3>
    
    <!-- Description -->
    <p class="text-neutral-600 mb-4 line-clamp-3">
      {description}
    </p>
    
    <!-- Tags -->
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mb-4">
        {tags.slice(0, 3).map(tag => (
          <span class="px-3 py-1 bg-neutral-100 text-neutral-700 text-xs font-semibold rounded-full uppercase tracking-wide">
            {tag}
          </span>
        ))}
      </div>
    )}
    
    <!-- Read More Link -->
    <a 
      href={articleUrl}
      class="inline-flex items-center text-accent-600 font-semibold hover:text-accent-700 transition-colors text-sm"
    >
      READ MORE
      <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    </a>
    
  </div>
  
</article>